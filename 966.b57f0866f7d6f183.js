"use strict";(self.webpackChunkstarwars=self.webpackChunkstarwars||[]).push([[966],{4966:(at,u,n)=>{n.r(u),n.d(u,{StarshipsModule:()=>p});var f=n(6895),b=n(4608),g=n(4931),i=n(4006),x=n(7579),Z=n(9751),v=n(2722),_=n(8675),T=n(8372),B=n(3900),N=n(9646),A=n(2076),J=n(5577),I=n(7359),S=n(4482);const O=(o,e)=>(o.push(e),o);var D=n(4004),t=n(4650),k=n(529);class l{constructor(e){this.httpClient=e}getPeople(e){let a=new k.LE;return e&&(a=a=a.append("search",e)),this.httpClient.get("https://swapi.dev/api/people",{params:a})}getStarship(e){return this.httpClient.get(`${e}`)}}l.\u0275fac=function(e){return new(e||l)(t.LFG(k.eN))},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"});var U=n(7185);class c{constructor(e){this.toastrService=e,this.savedSearchValue=null,this.bookmarks=[],this.initSavedSearchValue(),this.initBookmarks()}saveSearchValue(e){localStorage.setItem("savedSearchValue",JSON.stringify(e)),this.savedSearchValue=e}getSavedSearchValue(){return this.savedSearchValue}saveBookmark(e){localStorage.setItem("bookmarks",JSON.stringify([...this.bookmarks,e])),this.bookmarks?.push(e),this.toastrService.success("Bookmark added")}removeBookmark(e){const a=this.bookmarks.filter(r=>r.name!==e.name);localStorage.setItem("bookmarks",JSON.stringify(a)),this.bookmarks=a,this.toastrService.success("Bookmark removed")}getBookmarks(){return this.bookmarks}initSavedSearchValue(){const e=localStorage.getItem("savedSearchValue");"string"==typeof e&&(this.savedSearchValue=JSON.parse(e))}initBookmarks(){const e=localStorage.getItem("bookmarks");"string"==typeof e&&(this.bookmarks=JSON.parse(e))}}c.\u0275fac=function(e){return new(e||c)(t.LFG(U._W))},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"});var C=n(3805),V=n(3238),Y=n(4859),$=n(7392),M=n(4144),y=n(9549),j=n(4385),s=n(3626);function R(o,e){if(1&o&&(t.TgZ(0,"mat-option",9),t._uU(1),t.qZA()),2&o){const a=e.$implicit;t.Q6J("value",a),t.xp6(1),t.hij(" ",a.name," ")}}function G(o,e){if(1&o&&(t.TgZ(0,"mat-option",9),t._uU(1),t.qZA()),2&o){const a=e.$implicit;t.Q6J("value",a),t.xp6(1),t.hij(" ",a.name," ")}}function w(o,e){if(1&o){const a=t.EpF();t.TgZ(0,"div",12)(1,"button",13),t.NdJ("click",function(){t.CHM(a);const d=t.oxw(2);return t.KtG(d.toggleBookmark())}),t.TgZ(2,"mat-icon"),t._uU(3,"bookmark"),t.qZA()(),t.TgZ(4,"mat-form-field",14)(5,"mat-label"),t._uU(6,"Saved results"),t.qZA(),t.TgZ(7,"mat-select",15),t.YNc(8,G,2,2,"mat-option",16),t.qZA()()()}if(2&o){const a=t.oxw(2);t.xp6(1),t.Q6J("color",a.isPersonBookmarked()?"accent":"primary"),t.xp6(7),t.Q6J("ngForOf",a.storeService.getBookmarks())}}function z(o,e){1&o&&(t.TgZ(0,"th",25),t._uU(1," Name"),t.qZA())}function L(o,e){if(1&o&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&o){const a=e.$implicit;t.xp6(1),t.hij(" ",a.name," ")}}function E(o,e){1&o&&(t.TgZ(0,"th",25),t._uU(1," Model"),t.qZA())}function H(o,e){if(1&o&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&o){const a=e.$implicit;t.xp6(1),t.hij(" ",a.model," ")}}function W(o,e){1&o&&(t.TgZ(0,"th",25),t._uU(1," Cost In Credits"),t.qZA())}function X(o,e){if(1&o&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&o){const a=e.$implicit;t.xp6(1),t.hij(" ",a.cost_in_credits," ")}}function K(o,e){1&o&&t._UZ(0,"tr",27)}function q(o,e){1&o&&t._UZ(0,"tr",28)}function tt(o,e){if(1&o&&(t.TgZ(0,"table",17),t.ynx(1,18),t.YNc(2,z,2,0,"th",19),t.YNc(3,L,2,1,"td",20),t.BQk(),t.ynx(4,21),t.YNc(5,E,2,0,"th",19),t.YNc(6,H,2,1,"td",20),t.BQk(),t.ynx(7,22),t.YNc(8,W,2,0,"th",19),t.YNc(9,X,2,1,"td",20),t.BQk(),t.YNc(10,K,1,0,"tr",23),t.YNc(11,q,1,0,"tr",24),t.qZA()),2&o){const a=t.oxw().ngIf,r=t.oxw();t.Q6J("dataSource",a),t.xp6(10),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns)}}function et(o,e){if(1&o&&(t.ynx(0),t.YNc(1,w,9,2,"div",10),t.YNc(2,tt,12,3,"table",11),t.BQk()),2&o){const a=e.ngIf;t.xp6(1),t.Q6J("ngIf",a.length),t.xp6(1),t.Q6J("ngIf",a.length)}}class h{get peopleControl(){return this.formGroup.get("people")}get bookmarkControl(){return this.formGroup.get("bookmarks")}constructor(e,a){this.peopleService=e,this.storeService=a,this.destroyer$=new x.x,this.formGroup=new i.cw({people:new i.NI(""),bookmarks:new i.NI(null)}),this.starships$=new Z.y,this.displayedColumns=["name","model","cost_in_credits"]}ngOnInit(){this.getSavedData(),this.filteredPeople$=this.peopleControl.valueChanges.pipe((0,v.R)(this.destroyer$),(0,_.O)(""),(0,T.b)(500),(0,B.w)(e=>"string"==typeof e?this.getPeople(e||""):(0,N.of)([]))),this.bookmarkControl?.valueChanges.pipe((0,v.R)(this.destroyer$)).subscribe(e=>{e&&(this.getStarships(e),this.peopleControl.setValue(e))})}ngOnDestroy(){this.destroyer$.next(),this.destroyer$.unsubscribe()}getStarships(e){this.saveSearchData(e),this.starships$=(0,A.D)(e.starships).pipe((0,J.z)(r=>this.peopleService.getStarship(r)),function F(){return(0,S.e)((o,e)=>{(function P(o,e){return(0,S.e)((0,I.U)(o,e,arguments.length>=2,!1,!0))})(O,[])(o).subscribe(e)})}());const a=this.findBookmarkedPerson(e);a?this.bookmarkControl?.setValue(a,{emitEvent:!1}):this.bookmarkControl?.reset()}toggleBookmark(){const e=this.peopleControl.value;this.findBookmarkedPerson(e)?(this.bookmarkControl?.reset(),this.storeService.removeBookmark(e)):(this.bookmarkControl?.setValue(e,{emitEvent:!1}),this.storeService.saveBookmark(e))}displayName(e){return e?e.name:""}trackByIdFn(e){return e}isPersonBookmarked(){const e=this.bookmarkControl?.value;return!!this.storeService.getBookmarks().find(a=>a.name===e?.name)}findBookmarkedPerson(e){return this.storeService.getBookmarks().find(a=>a.name===e.name)}getPeople(e){return this.peopleService.getPeople(e).pipe((0,D.U)(a=>a.results))}getSavedData(){const e=this.storeService.getSavedSearchValue();e&&(this.peopleControl.setValue(e),this.getStarships(e))}saveSearchData(e){this.storeService.saveSearchValue(e)}}h.\u0275fac=function(e){return new(e||h)(t.Y36(l),t.Y36(c))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-starships"]],decls:13,vars:10,consts:[[1,"starships__container"],[1,"starships",3,"formGroup"],[1,"starships__search","search"],["appearance","fill",1,"search__field"],["type","text","placeholder","Pick one","aria-label","Names","matInput","","formControlName","people",3,"matAutocomplete"],["autoActiveFirstOption","","autoSelectActiveOption","true",3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"value"],["class","table__header",4,"ngIf"],["mat-table","","class","table mat-elevation-z8",3,"dataSource",4,"ngIf"],[1,"table__header"],["mat-fab","","aria-label","Bookmark",3,"color","click"],["appearance","fill"],["formControlName","bookmarks"],[3,"value",4,"ngFor","ngForOf"],["mat-table","",1,"table","mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","model"],["matColumnDef","cost_in_credits"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5,"Names"),t.qZA(),t._UZ(6,"input",4),t.TgZ(7,"mat-autocomplete",5,6),t.NdJ("optionSelected",function(d){return a.getStarships(d.option.value)}),t.YNc(9,R,2,2,"mat-option",7),t.ALo(10,"async"),t.qZA()()(),t.YNc(11,et,3,2,"ng-container",8),t.ALo(12,"async"),t.qZA()()),2&e){const r=t.MAs(8);t.xp6(1),t.Q6J("formGroup",a.formGroup),t.xp6(5),t.Q6J("matAutocomplete",r),t.xp6(1),t.Q6J("displayWith",a.displayName),t.xp6(2),t.Q6J("ngForOf",t.lcZ(10,6,a.filteredPeople$))("ngForTrackBy",a.trackByIdFn),t.xp6(2),t.Q6J("ngIf",t.lcZ(12,8,a.starships$))}},dependencies:[f.sg,f.O5,C.XC,V.ey,C.ZL,Y.cs,$.Hw,M.Nt,y.KE,y.hX,j.gD,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,i.Fj,i.JJ,i.JL,i.sg,i.u,f.Ov],styles:[".starships[_ngcontent-%COMP%]{padding:25px;width:1000px}.starships__container[_ngcontent-%COMP%]{display:flex;justify-content:center}.search__field[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]{width:500px}.table__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}"]});const ot=[{path:"",component:h}];class m{}m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[g.Bz.forChild(ot),g.Bz]});class p{}p.\u0275fac=function(e){return new(e||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({imports:[f.ez,b.m,m]})}}]);